<!-- ======================================================
    This file is part of modified version based on the official MuJoCo WAM model.
    Copyright UWARL (UW Mechanical and Control Lab).
    
    Model       :: WAM Arm from Barrett technologies
        Source      : https://github.com/jhu-lcsr/barrett_model
        Downloaded  : Oct 10, 2015
        
    Mujoco      :: Advanced physics simulation engine
        Source      : www.roboti.us
        Version     : 1.31

    Original    :: Vikash kumar
        Source      : https://roboti.us/forum/index.php?resources/wam-and-barrett-hand.20/
        Downloaded  : Jun 13, 2022
        Contacts    : kumar@roboti.us
        
    Author      :: Jack (Jianxiang) Xu
        Contacts    : j337xu@uwaterloo.ca
        Last edits  : Jun 13, 2022
    
    Spec        :: WAM Inertial Spec (*1)
        Source      : https://web.barrett.com/support/WAM_Documentation/WAM_InertialSpecifications_AC-02.pdf
        Correction  : Jack @ Jun 20, 2022
        
    TODO:
    - [ ] mass and inertial parameters double check and configure
====================================================== -->

<mujocoinclude>
    <!-- WAM -->
    <body name="wam/base_link" childclass="wam" pos="0 0 0">
        <body name="wam/base" childclass="wam" pos="0 0 0">
            <!-- ### Inertial Ref: (*1, pg.10) unit: [m, kg, kg * m^2] 
                Note: 
                    - we have to offset the stl model frame to the inertial frame in doc
                    - pos = <z, x, y> + <0,0,0.346>
                    - **the axis should be based on the orientation notation at the bottom left corner
            -->
            <inertial   pos="-0.14071720 -0.02017671 0.07995294" mass="9.97059584" diaginertia="0.11760385 0.10916849 0.18294303" /> 
            <geom       class="wam/viz" mesh="base_link_fine"/>
            <geom       class="wam/col" mesh="base_link_convex"/>
        </body>

        <body name="wam/shoulder_yaw_link" pos="0 0 0.346">
            <!-- ### Inertial Ref: (*1, pg.12) unit: [m, kg, kg * m^2] 
                Note:
                    - frame correction to the stl: <x, z, -y>
            -->
            <inertial               pos="-0.00443422 -0.00066489 -0.12189039" mass="10.76768767" diaginertia="0.13488033 0.09046330 0.11328369" />
            <joint name="wam/J1"    range="-2.6 2.6" damping="1.98"/>
            <geom                   class="wam/viz" mesh="shoulder_link_fine"/>
            <geom                   class="wam/col" mesh="shoulder_link_convex_decomposition_p1"/>
            <geom                   class="wam/col" mesh="shoulder_link_convex_decomposition_p2"/>
            <geom                   class="wam/col" mesh="shoulder_link_convex_decomposition_p3"/>
            
            <body name="wam/shoulder_pitch_link" pos="0 0 0" quat="0.707107 -0.707107 0 0"> 
                <!-- ### Inertial Ref: (*1, pg.14) unit: [m, kg, kg * m^2] 
                    Note:
                        - frame correction to the stl: <x, -z, y>
                -->
                <!-- <body name="wam/shoulder_pitch_link" pos="0 0 0"> -->
                <inertial               pos="-0.00236983 -0.01542114 0.03105614" mass="3.8749" diaginertia="0.02140958 0.01558906 0.01377875" />
                <joint name="wam/J2"    range="-1.985 1.985" damping="0.55"/>
                <geom                   class="wam/viz" mesh="shoulder_pitch_link_fine"/>
                <geom                   class="wam/col" mesh="shoulder_pitch_link_convex"/>
                
                <body name="wam/upper_arm_link" pos="0 0 0" quat="0.707107 0.707107 0 0">
                    <!-- ### Inertial Ref: (*1, pg.16) unit: [m, kg, kg * m^2] 
                        Note: 
                            - we have to offset the stl model frame to the inertial frame in doc
                            - pos = <0.045, 0, 0.55> - <0.03825858, 0.00003309, 0.20750770>
                    -->
                    <!-- <body name="wam/upper_arm_link" pos="0 0 0"> -->
                    <inertial               pos="0.00674142 -0.00003309 0.3424923" mass="1.8028141" diaginertia="0.05911077 0.05927043 0.00324550" />
                    <joint name="wam/J3"    range="-2.8 2.8" damping="1.65"/>
                    <geom                   class="wam/viz" mesh="upper_arm_link_fine"/>
                    <geom                   class="wam/col" mesh="upper_arm_link_convex_decomposition_p1"/>
                    <geom                   class="wam/col" mesh="upper_arm_link_convex_decomposition_p2"/>
                    
                    <body name="wam/forearm_link" pos="0.045 0 0.55" quat="0.707107 -0.707107 0 0">
                        <!-- ### Inertial Ref: (*1, pg.22) unit: [m, kg, kg * m^2]
                            [ Elbow + WristBase (7DOF) ]
                            Note: 
                                - 4DOF has a different attribute here
                                - we have to offset the stl model frame (at the elbow joint) to the inertial frame in doc (z4 aligned with central axis of the elbow)
                                - pos = <0.00498512 -0.1327162 -0.00022942> - <0.045, 0, 0>
                        -->
                        <!-- <body name="wam/forearm_link" pos="0.045 0 0.55"> -->
                        <inertial               pos="-0.04001488 -0.1327162 -0.00022942" mass="2.40016804" diaginertia="0.01491672 0.00294463 0.01482922" />
                        <joint name="wam/J4"    range="-0.9 3.14159" damping="0.88"/>
                        <geom                   class="wam/viz" mesh="elbow_link_fine"/>
                        <geom                   class="wam/col" mesh="elbow_link_convex"/>
                        <geom                   class="wam/viz" mesh="forearm_link_fine" pos="-.045 -0.0730 0" euler="1.57 0 0"/>
                        <geom                   class="wam/col" mesh="forearm_link_convex_decomposition_p1" pos="-0.045 -0.0730 0" euler="1.57 0 0"/>
                        <geom                   class="wam/col" mesh="forearm_link_convex_decomposition_p2" pos="-0.045 -0.0730 0" euler="1.57 0 0"/>
                        
                        <body name="wam/wrist_yaw_link" pos="-0.045 -0.3 0" quat="0.707107 0.707107 0 0">
                            <!-- ### Inertial Ref: (*1, pg.24) unit: [m, kg, kg * m^2] -->
                            <!-- <body name="wam/wrist_yaw_link" pos="-0.045 -0.3 0"> -->
                            <inertial               pos="0.00008921 0.00435824 -0.00511217" mass="0.12376019" diaginertia="0.00005029 0.00006270 0.00007582" /> 
                            <joint name="wam/J5"    range="-4.55 1.25" damping="0.55"/>
                            <geom                   class="wam/viz" mesh="wrist_yaw_link_fine"/>
                            <geom                   class="wam/col" mesh="wrist_yaw_link_convex_decomposition_p1"/>
                            <geom                   class="wam/col" mesh="wrist_yaw_link_convex_decomposition_p2"/>
                            
                            <body name="wam/wrist_pitch_link" pos="0 0 0" quat="0.707107 -0.707107 0 0">
                                <!-- ### Inertial Ref: (*1, pg.26) unit: [m, kg, kg * m^2] -->
                                <!-- <body name="wam/wrist_pitch_link" pos="0 0 0" > -->
                                <inertial               pos="-0.00012262 -0.02468336 -0.01703194" mass="0.41797364" diaginertia="0.00055516 0.00045358 0.00024367" />
                                <joint name="wam/J6"    range="-1.5707 1.5707" damping="0.11"/>
                                <geom                   class="wam/viz" mesh="wrist_pitch_link_fine"/>
                                <geom                   class="wam/col" mesh="wrist_pitch_link_convex_decomposition_p1"/>
                                <geom                   class="wam/col" mesh="wrist_pitch_link_convex_decomposition_p2"/>
                                <geom                   class="wam/col" mesh="wrist_pitch_link_convex_decomposition_p3"/>
                                
                                <body name="wam/wrist_palm_link" pos="0 0 0" quat="0.707107 0.707107 0 0">
                                    <inertial               pos="0 0 0.055" quat="0.707107 0 0 0.707107" mass="0.0828613" diaginertia="0.00020683 0.00010859 0.00010851" />
                                    <joint name="wam/J7"    range="-3 3" damping="0.11"/>
                                    <geom                   class="wam/viz" mesh="wrist_palm_link_fine"/>
                                    <geom                   class="wam/col" mesh="wrist_palm_link_convex"/>
                                    <!-- WAM BHAND -->
                                        <!-- <include file="include_bhand_Chain.xml"/> -->
                                </body>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
        </body>
    </body>
    <!-- END of WAM -->
</mujocoinclude>
