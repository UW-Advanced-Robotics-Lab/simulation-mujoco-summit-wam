<!-- ======================================================
    Copyright UWARL (UW Mechanical and Control Lab).
    (This file is based on a Forklift Model imported / modified by Arnab.)
        
    Author      :: Arnab Joardar
        Contacts    : ajoardar@uwaterloo.ca
        Last edits  : Jul 3, 2024
        
    TODO:
    - 
====================================================== -->

<mujocoinclude> 

    <!-- Fetch -->
    <body name="cart/base_link" pos="0 0 0">
        <!-- === BASE LINK === === === === -->
        <!-- mobile body -->
        <inertial                                       pos="-0.0987869701644406 0.111546221439391 0.0189782111673935" mass="30.62" 
                                                        diaginertia="0.10745 0.19097 0.29788" />
        <geom name="cart/viz/base_link"                 class="cart/body/viz" mesh="base_link"/>

        <!-- Place two IMUs to get-back yaw angular-acceleration -->
        <site name="imu_sensor_site_1_cart_base_link" pos="0.263991 0.111546 0" type="box" size="0.05 0.05 0.05" rgba="0.9 0 0 0.3"/>
        <!-- Keeping the 2nd IMU-sensor 0.1 m away from the first. This value is used `state_pub_mujoco.py` when calculating the yaw angular-acceleration -->
        <site name="imu_sensor_site_2_cart_base_link" pos="0.263991 0.211546 0" type="box" size="0.05 0.05 0.05" rgba="0 0.9 0 0.3"/>

        <!-- Simplified the collision into boxes -->
        <geom name="cart/col/base_link/box_body"        class="cart/col" mesh="base_link"/>

        <!-- world placement -->
        <joint name="cart/slide/world_x" armature="0.0001" axis="1 0 0" damping="0.1" pos="0.233991199548651 0.11154622143 0" type="slide"></joint>
        <joint name="cart/slide/world_y" armature="0.0001" axis="0 1 0" damping="1e+11" pos="0.233991199548651 0.11154622143 0" type="slide"></joint>
        <joint name="cart/hinge/world_z" armature="0.0001" axis="0 0 1" damping="0.1"  pos="0.233991199548651 0.11154622143 0" type="hinge"></joint>

        <!-- === hub LINK === === === === -->
        <!-- Front Left Hub -->
        <body name="cart/swivel_hub/L_link" pos="-0.376008800451349 -0.128453778560609 0" quat="0 0 0.7071068 0.7071068">
            <geom name="cart/viz/L_swivel_hub"          class="cart/hub/viz" mesh="front_hub_link"/>
            <inertial                                   pos="-0.0299630112338933 -0.0291453924306544 0" mass="0.074879" diaginertia="0.00013372 0.00011036 0.00012633"/>
            <!-- <joint name="cart/L_swivel_hub"             class="cart/swivel_hub" pos="0 0 0"/> -->
            <!-- Front Left Wheel -->
            <body name="cart/whl/FL_link" pos="-0.05 -0.0880217888326065 0" quat="0 0.7071068 0 0.7071068">
                <geom name="cart/viz/FL_whl"            class="cart/whl/viz" mesh="wheel_link"/>
                <geom name="cart/col/FL_whl"            class="cart/whl/col" friction="0.1 0.005 0.0001"/>
                <inertial                               pos="0 0 0" mass="0.19653" diaginertia="0.00062371 0.00033707 0.00033707"/>
                <!-- <joint name="cart/FL_whl"               class="cart/whl" pos="0 0 0"/> -->
            </body>
        </body>

        <!-- Front Right Hub -->
        <body name="cart/swivel_hub/R_link" pos="-0.376008800451349 0.351546221439391 0" quat="0 0 0.7071068 0.7071068">
            <geom name="cart/viz/R_swivel_hub"          class="cart/hub/viz" mesh="front_hub_link"/>
            <inertial                                   pos="-0.0299630112338933 -0.0291453924306544 0" mass="0.074879" diaginertia="0.00013372 0.00011036 0.00012633"/>
            <!-- <joint name="cart/R_swivel_hub"             class="cart/swivel_hub" pos="0 0 0"/> -->
            <!-- Front Left Wheel -->
            <body name="cart/whl/FR_link" pos="-0.05 -0.0880217888326065 0" quat="0 0.7071068 0 0.7071068">
                <geom name="cart/viz/FR_whl"            class="cart/whl/viz" mesh="wheel_link"/>
                <geom name="cart/col/FR_whl"            class="cart/whl/col" friction="0.1 0.005 0.0001"/>
                <inertial                               pos="0 0 0" mass="0.19653" diaginertia="0.00062371 0.00033707 0.00033707"/>
                <!-- <joint name="cart/FR_whl"               class="cart/whl" pos="0 0 0"/> -->
            </body>
        </body>

        <!-- Rear Left Hub -->
        <body name="cart/static_hub/L_link" pos="0.233991199548651 -0.128453778560609 -0.108021788832606" quat="0 0 0.7071068 0.7071068">
            <geom name="cart/viz/L_static_hub"          class="cart/hub/viz" mesh="rear_hub_link"/>
            <inertial                                   pos="0.0408028663277845 0.0776485299054857 0" mass="0.072122" diaginertia="0.00013061 0.0001089 0.00012207"/>
            <!-- Rear Left Wheel -->
            <body name="cart/whl/RL_link" pos="0.02 0.02 0" quat="0 0.7071068 0 0.7071068">
                <geom name="cart/viz/RL_whl"            class="cart/whl/viz" mesh="wheel_link"/>
                <geom name="cart/col/RL_whl"            class="cart/whl/col" friction="0.1 0.005 0.0001"/>
                <inertial                               pos="0 0 0" mass="0.19653" diaginertia="0.00062371 0.00033707 0.00033707"/>
                <!-- <joint name="cart/RL_whl"               class="cart/whl" pos="0 0 0"/> -->
            </body>
        </body>

        <!-- Rear Right Hub -->
        <body name="cart/static_hub/R_link" pos="0.233991199548651 0.351546221439391 -0.108021788832607" quat="0 0 0.7071068 0.7071068">
            <geom name="cart/viz/R_static_hub"          class="cart/hub/viz" mesh="rear_hub_link"/>
            <inertial                                   pos="0.0408028663277845 0.0776485299054857 0" mass="0.072122" diaginertia="0.00013061 0.0001089 0.00012207"/>
            <!-- Rear Right Wheel -->
            <body name="cart/whl/RR_link" pos="0.02 0.02 0" quat="0 0.7071068 0 0.7071068">
                <geom name="cart/viz/RR_whl"            class="cart/whl/viz" mesh="wheel_link"/>
                <geom name="cart/col/RR_whl"            class="cart/whl/col" friction="0.1 0.005 0.0001"/>
                <inertial                               pos="0 0 0" mass="0.19653" diaginertia="0.00062371 0.00033707 0.00033707"/>
                <!-- <joint name="cart/RR_whl"               class="cart/whl" pos="0 0 0"/> -->
            </body>
        </body>

        <!-- Handle -->
        <!-- <body name="cart/handle_link" pos="0.263991199548651 0.111546221439391 0.00397821116739353" quat="0.7071068 0.7071068 0 0">
            <geom name="cart/viz/handle"                class="cart/handle/viz" mesh="handle_link"/>
            <geom name="cart/col/handle"                class="cart/col" mesh="handle_link"/>
            <inertial                                   pos="0 0.269507274690265 0" mass="1.57464851050989" diaginertia="0.0949283656491046 0.0671463724810826 0.028096922870124"/>
        </body> -->
        <body name="cart/handle/left_cylinder" pos="0.263991 -0.208454 0.2" quat="1 0 0 0">
            <geom name="cart/viz/handle/left_cylinder" type="cylinder" class="cart/handle/viz" size="0.02 0.2"/>
            <geom name="cart/col/handle/left_cylinder" type="cylinder" class="cart/col" size="0.02 0.2"/>
            <body name="cart/handle/horizontal_cylinder" pos="0 0.32 0.2" quat="0.7071068 -0.7071068 0 0">
                <geom name="cart/viz/handle/horizontal_cylinder" type="cylinder" class="cart/handle/viz" size="0.03 0.32"/>
                <geom name="cart/col/handle/horizontal_cylinder" type="cylinder" class="cart/col" size="0.03 0.32" friction="0.01 0.005 0.0001"/>
                <!-- <body name="flexible_cylinder" pos="0.3 0 0">
                    <composite type="cylinder" count="5 5 21" spacing="0.025">
                        <skin texcoord="true" material="blue_sponge" rgba=".7 .7 .7 1"/>
                        <geom type="capsule" size="0.003 0.005" contype="1" conaffinity="1" group="1" rgba=".8 .2 .1 1"/>
                    </composite>
                </body> -->
            </body>
        </body>
        <body name="cart/handle/right_cylinder" pos="0.263991 0.431546 0.2" quat="1 0 0 0">
            <geom name="cart/viz/handle/right_cylinder" type="cylinder" class="cart/handle/viz" size="0.02 0.2"/>
            <geom name="cart/col/handle/right_cylinder" type="cylinder" class="cart/col" size="0.02 0.2"/>
        </body>
    </body>
        
        

</mujocoinclude>
